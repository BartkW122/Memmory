<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="style.css">

    <script>
        let indeksy = [];
        for (let i = 1; i <= 10; i++) {
            indeksy.push(i, i);
        }

        indeksy.sort(() => Math.random() - 0.5);
    
        function losuj() {
            if (indeksy.length === 0) {

                for (let i = 1; i <= 10; i++) {
                    indeksy.push(i, i);
                }

                indeksy.sort(() => Math.random() - 0.5);

            }

            
            const wynik = indeksy.shift(); 
            return wynik;
        }

        function powtorzenie(tab){
            if(tab[0][0].children[0].getAttribute("src") == tab[1][0].children[0].getAttribute("src")){
                return true;
            }else{
                return false;
            }
        }

        $(document).ready(function () {
            let liczba_zluch_wyborow=0;

            let kafelek;
            let img;
            let table=[];
            
            $("button").on("click",function(){
                $("span").text("Licznik")
                liczba_zluch_wyborow = 0;
                $("div.kafelek").remove();

                for(let i = 1;i<=20;i++){
                    let liczba = losuj();

                    kafelek=document.createElement("div");
                    img=document.createElement("img");

                    kafelek.setAttribute("id",`element${liczba}`);
                    kafelek.classList.add("kafelek")
                    img.setAttribute("src",`images/element${liczba}.png`);
                    kafelek.appendChild(img);

                    $("div#kafelki").append(kafelek)
                    console.log(kafelek)

                }
                
                $("div.kafelek").on("click",function(){
                    
                    if(table.length < 2){

                        table.push($(this))
                        $(this).children()[0].style.opacity="1";
                        
                    }else{

                        $("div.kafelek img").css("opacity","0");
                        table.splice(0,table.length);
                        table.push($(this))
                        $(this).children()[0].style.opacity="1";
                        
                    }
                    

                    if(powtorzenie(table)){
                        table.forEach(item=>{
                            //item.css("display","none")
                            item.css("background-color","white")
                            console.log(item[0].children[0].remove())
                            item.addClass("zaznaczone")

                            if($(".zaznaczone").length == 20){
                                $("div.kafelek").remove();
                                $("span").text("Licznik:")
                                liczba_zluch_wyborow = 0;
                                alert("Wygrale≈õ!!!");
                            }
                        })
                    }else{
                        liczba_zluch_wyborow++;
                        $("span").text(`Licznik:${liczba_zluch_wyborow}`)
                    }
                })
            })
        });
    </script>

    <title>Memmory</title>
</head>
<body>
    <div id="conatiner">
        <span>Licznik</span>
        <div id="kafelki">
            <!--kafelki-->
        </div>
        <button>Rozpocznij gre</button>
    </div>
</body>
</html>